"use strict";function asyncGeneratorStep(e,t,n,o,r,i,u){try{var c=e[i](u),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(o,r)}function _asyncToGenerator(c){return function(){var e=this,u=arguments;return new Promise(function(t,n){var o=c.apply(e,u);function r(e){asyncGeneratorStep(o,t,n,r,i,"next",e)}function i(e){asyncGeneratorStep(o,t,n,r,i,"throw",e)}r(void 0)})}}!function(){var n=document.querySelector("[form]"),o=document.querySelector("[form-friend]"),r=document.querySelectorAll("[attempt-button]"),t=document.querySelector("[roulette-disc]"),i="hidden",u=document.querySelectorAll("[show-on-win]"),c=document.querySelectorAll("[hide-on-win]"),e=document.querySelectorAll("[show-on-loss]"),l=document.querySelectorAll("[hide-on-loss]"),a=document.querySelectorAll("[show-on-attempt]"),s=document.querySelectorAll("[hide-on-attempt]"),d=document.querySelectorAll("[show-on-attempt1]"),m=document.querySelectorAll("[hide-on-attempt1]"),f=document.querySelectorAll("[show-on-notvalid]"),p=document.querySelectorAll("[hide-on-notvalid]"),h=[6],y=8,g=0;n&&n.addEventListener("submit",function(e){e.preventDefault(),n.querySelector("[sendemail]").setAttribute("disabled","disabled"),n.querySelector("[sendemail]").innerHTML="load...",v("https://bomba.promodo.digital/game.php",new FormData(n)).then(function(t){t.success?(n.querySelector("[sendemail]").innerHTML="OK!",g++,_(t),S(t),r.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.target.setAttribute("disabled",""),g++,_(t)})})):(M(f,0),G(p,0))})});var S=function(t){o.addEventListener("submit",function(e){e.preventDefault(),o.querySelector("[sendemail]").setAttribute("disabled","disabled"),o.querySelector("[sendemail]").innerHTML="load...",v("https://bomba.promodo.digital/validate.php",new FormData(n)).then(function(e){g++,_(t)})})};function v(){return w.apply(this,arguments)}function w(){return(w=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",body:n});case 2:return o=e.sent,e.abrupt("return",o.json());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b,q,A,_=function(e){0===e.attempt?(3===g?E:T)():e.attempt===g?D(e):T()},T=function(){L(h[0]),1===g&&(M(a),G(s)),2===g&&(M(d),G(m))},D=function(e){L(e.prize),M(u),G(c);document.querySelector(".roulette__img").setAttribute("src",{1:"img/win3.png",2:"img/win100.png",3:"img/win2.png",4:"img/win300.png",5:"img/win200.png",7:"img/win1.png",8:"img/win50.png"}[e.prize])},E=function(){L(h[0]),M(e),G(l)},L=function(e){e=k(1,4)-1/y*(e-1)-1/16;t.style.transform="rotate("+e+"turn)",t.style.transition="3s"},G=function(e){setTimeout(function(){e.forEach(function(e){e.setAttribute(i,"")})},3e3*(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1))},M=function(e){setTimeout(function(){e.forEach(function(e){e.removeAttribute(i)})},3e3*(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1))},k=function(e,t){t=Math.floor(Math.random()*(t-e)+e),e=b===t?1:0;return b=t+e};sessionStorage.getItem("widget__close")||(q=document.querySelector(".widget"),A=document.querySelector(".widget__close"),q.removeAttribute("hidden"),A.onclick=function(e){e.preventDefault(),sessionStorage.setItem("widget__close",!0),q.setAttribute("hidden","")})}();